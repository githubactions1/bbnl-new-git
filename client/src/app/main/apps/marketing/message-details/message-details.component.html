<div class="page-layout blank usrEmplye pageBackground cusAcntCmpnt">
  <div *ngIf="loader">
    <div class="loading-indicator">
        <div class="spinner-2">
          <img src="assets/images/logos/glits_D.png" style="max-width: 150%;">
        </div>
      </div>
</div>
  <pg-top-header [headerDtls]="getHeaderDtls()"></pg-top-header>

  <div *ngIf="permissions.insrt_in==0">
    <div class="ds-card m-12 p-12 text-center noPermsMsgColor">
      You do not have permissions to do this operation. Please contact Administrator to get permissions.
    </div>
  </div>

  <div class="ds-card crd p-4" *ngIf="permissions && (permissions.insrt_in==1)?true:false">

    <form class="form-horizontal" [formGroup]="msgFrm">

      <div fxLayout="row" fxLayout.xs="column" fxFlexFill>
        <div fxFlex="50" fxFlex.xs="100" class="px-8">
          <div class="form-label">Select Catogery</div>
          <mat-form-field appearance="outline">
            <!-- <mat-label>Gender</mat-label> -->
            <!-- (selectionChange)="getLmo($event.value)"  -->
            <mat-select (selectionChange)="getMandals($event.value)" formControlName="Catg_id">
              <mat-option *ngFor="let mc of msctgry" [value]="mc.msgs_ctgry_id">
                {{mc.msgs_ctgry_nm}}
              </mat-option>
            </mat-select>
            <mat-error>Catogery is required!</mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="50" fxFlex.xs="100" class="px-8">
          <div class="form-label">Select MessageType</div>
          <mat-form-field appearance="outline">
            <!-- <mat-label>Gender</mat-label> -->
            <!-- (selectionChange)="getLmo($event.value)"  -->
            <mat-select formControlName="msgty_id">
              <mat-option *ngFor="let mt of msgType" [value]="mt.msge_type_id">
                {{mt.msge_type_nm}}
              </mat-option>
            </mat-select>
            <mat-error>messagetype is required!</mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="50" fxFlex.xs="100" class="px-8">
          <div class="form-label">Select Status</div>
          <mat-form-field appearance="outline">
            <!-- <mat-label>Gender</mat-label> -->
            <!-- (selectionChange)="getLmo($event.value)"  -->
            <mat-select formControlName="Stuts_id">
              <mat-option *ngFor="let ms of msgSts" [value]="ms.enty_sts_id">
                {{ms.sts_nm}}
              </mat-option>
            </mat-select>
            <mat-error>messagetype is required!</mat-error>
          </mat-form-field>
        </div>
      </div>
      <div fxLayout="row" fxLayout.xs="column" fxFlexFill>

        <div fxFlex="50" fxFlex.xs="100" class="px-8">
          <div class="form-label">Start Date</div>
          <mat-form-field appearance="outline">
            <input matInput [matDatepicker]="picker1" formControlName="str_dt">
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
            <mat-error>Start Date is required!</mat-error>
          </mat-form-field>

        </div>
        <div fxFlex="50" fxFlex.xs="100" class="px-8">
          <div class="form-label">End Date</div>
          <mat-form-field appearance="outline">
            <input matInput [matDatepicker]="picker" formControlName="end_dt">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error>End Date is required!</mat-error>
          </mat-form-field>

        </div>
        <div fxFlex="50" fxFlex.xs="100" class="pt-32">
          <div class="form-label"></div>
          <!-- <mat-form-field appearance="outline"> -->
          <!-- <mat-label>Father/Husband Name</mat-label> -->
          <mat-checkbox formControlName="till_dt">Till Date</mat-checkbox>
          <!-- <mat-error>Last Name is required!</mat-error> -->
          <!-- </mat-form-field> -->
        </div>
      </div>
      <div fxLayout="row" style="justify-content: center;" fxLayout.xs="column" fxFlexFill>
        <div>
          <button mat-raised-button color='primary' class = "gtDtls" (click)="getDetails()">Get Messages</button>
        </div>
        <div style="margin-left: 8px;">
          <button mat-raised-button color='primary' class = "gtDtls" (click)="Reset(msgFrm)">Reset</button>
        </div>

      </div>
    </form>
  </div>
  <div fxLayout="row">
    <div fxFlex="80"></div>
    <div fxFlex="16">

      <!-- <button class="addBtn-color mb-8 mt-8 mat-raised-button mat-primary" color="primary" mat-raised-button=""
        style="float:right" (click)="opensideBar('addFormPanel',null)">
        <span class="mat-button-wrapper">
          <mat-icon class="addfld-icon-color mat-icon material-icons mat-icon-no-color" role="img" aria-hidden="true">
            person</mat-icon>
          <span class="pt-2">&nbsp;Add New Customer</span>
        </span>
      </button> -->

      <button mat-raised-button color="primary" class="m-16 mr-40 addBtn addBtn-color" style="float:right"
        *ngIf="showBckBtn" (click)="bckBtn()">

        <span class="pt-2">Back</span>
      </button>
    </div>
  </div>

 

  <div *ngIf="showTble" class="p-40 pt-0">
    <div class="ds-card grid" *ngIf="(permissions.slct_in==1)?true:false">
      <dx-data-grid id="gridContainer" [allowColumnResizing]="true" [dataSource]="rowData" [remoteOperations]="false" [allowColumnReordering]="true"
        [rowAlternationEnabled]="true" [showColumnLines]="true" [showRowLines]="true" [showBorders]="true" [columnAutoWidth]="true"
         style="width:100%">
        <!-- <dxo-selection mode="multiple"></dxo-selection> -->
        <dxo-paging [pageSize]="10"></dxo-paging>
        <dxo-pager [visible]="true" [showPageSizeSelector]="true" [allowedPageSizes]="[10, 25, 50, 100]" [showInfo]="true"></dxo-pager>
        <dxo-search-panel [visible]="true" [highlightCaseSensitive]="true"></dxo-search-panel>
        <dxo-filter-panel [visible]="true"></dxo-filter-panel>
        <dxo-group-panel [visible]="true"></dxo-group-panel>
        <dxo-grouping [autoExpandAll]="false"></dxo-grouping>
        <dxo-column-chooser [enabled]="true" mode="select">
          <!-- or "select" -->
        </dxo-column-chooser>
        <dxo-export [enabled]="(permissions.exprt_in==1)?true:false" [allowExportSelectedData]="true"></dxo-export>
        <dxo-filter-row [visible]="true"></dxo-filter-row>
        <dxi-column [allowResizing]="true" *ngFor="let f of columnDefs" [visible]="!f.hide" [dataField]="f.field" [caption]="f.headerName"
          alignment="f.cellStyle.text-align" [width]="f.width"></dxi-column>
        <!-- <dxi-column [showInColumnChooser]="false" [visible]="(permissions.updt_in==1)?true:false" type="buttons"
          [width]="100" caption="Edit" cellTemplate="editTemplate">
          <div *dxTemplate="let data of 'editTemplate'">
            <div class="cursor-pointer" (click)="onCellClick(data)">
              Edit
            </div>
          </div>
        </dxi-column> -->
        <!-- <dxi-column [showInColumnChooser]="false" [visible]="(permissions.dlte_in==1)?true:false" type="buttons"
          [width]="100" caption="Delete" cellTemplate="delTemplate">
          <div *dxTemplate="let data of 'delTemplate'">
            <div class="cursor-pointer" (click)="onCellClick(data)">
              Delete
            </div>
          </div>
        </dxi-column> -->
        <dxi-column [showInColumnChooser]="false" type="buttons" [width]="100" caption="view"
          cellTemplate="ViewTemplate">
          <div *dxTemplate="let data of 'ViewTemplate'">
            <div class="cursor-pointer" (click)="onCellClick(data)">
              view
            </div>
          </div>
        </dxi-column>
      </dx-data-grid>

    </div>


    <!-- <ag-grid-angular #agGrid style="width: 100%; height: 530px;" class="ag-theme-balham p-12" [pagination]="pagination"
      [paginationPageSize]="paginationPageSize" [rowData]="rowData" [columnDefs]="columnDefs" [enableFilter]="true"
      [getRowHeight]="getRowHeight" [rowSelection]="rowSelection" [loadingCellRenderer]="loadingCellRenderer"
      [defaultColDef]="defaultColDef" [localeTextFunc]="localeTextFunc"
      [overlayLoadingTemplate]="overlayLoadingTemplate" [loadingCellRendererParams]="loadingCellRendererParams"
      [suppressHorizontalScroll]="false" [floatingFilter]="true" (cellClicked)="onCellClick($event)">
    </ag-grid-angular> -->
  </div>
</div>