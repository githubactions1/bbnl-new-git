<div class="container usrEmplye pageBackground">
  <div *ngIf="loader">
    <div class="loading-indicator">
        <div class="spinner-2">
          <img src="assets/images/logos/glits_D.png" style="max-width: 150%;">
        </div>
      </div>
</div>
  <pg-top-header [headerDtls]="getHeaderDtls()"></pg-top-header>
  <ds-loading *ngIf="shwLdr"></ds-loading>
  <div class="ds-card m-12 p-12 text-center noPermsMsgColor" *ngIf="!permissions">{{shwPermMsg}}</div>
  <div class="ds-card m-12" *ngIf="permissions">
    <dx-data-grid class="p-8" id="gridContainer" [dataSource]="rowData" [remoteOperations]="false"
      [allowColumnReordering]="true" [rowAlternationEnabled]="true" [showColumnLines]="true" [showRowLines]="true"
      [showBorders]="true"  (onToolbarPreparing)="onToolbarPreparing($event)" style="width:100%">
      <!-- <div class="cursor-pointer tblEdtBtn">
        Pull OLT Details
      </div> -->
      <!-- <dxo-selection mode="multiple"></dxo-selection> -->
      <dxo-paging [pageSize]="10"></dxo-paging>
      <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 25, 50, 100]" [showInfo]="true"></dxo-pager>
      <dxo-search-panel [visible]="true" [highlightCaseSensitive]="true"></dxo-search-panel>
      <dxo-filter-panel [visible]="true"></dxo-filter-panel>
      <dxo-group-panel [visible]="true"></dxo-group-panel>
      <dxo-grouping [autoExpandAll]="false"></dxo-grouping>
      <dxo-column-chooser [enabled]="true" mode="select">
        <!-- or "select" -->
      </dxo-column-chooser>
      <dxo-export [enabled]="(permissions.exprt_in==1)?true:false" [allowExportSelectedData]="true" fileName="Optical Line Terminal"></dxo-export>
      <dxo-filter-row [visible]="true"></dxo-filter-row>
      <dxi-column *ngFor="let f of columnDefs" [visible]="!f.hide" [dataField]="f.field" [caption]="f.headerName"
        alignment="f.cellStyle.text-align" [width]="f.width" [alignment] = "f.algnmnt"
        [allowFiltering]="f.filter" [allowHeaderFiltering]="f.filter"></dxi-column>
      <dxi-column [showInColumnChooser]="false" [visible]="(permissions.updt_in==1)?true:false" type="buttons"
        [width]="100" caption="Edit" cellTemplate="editTemplate">
        <div *dxTemplate="let data of 'editTemplate'">
          <div class="cursor-pointer tblEdtBtn" (click)="onCellClick(data)">
            Edit
          </div>
        </div>
      </dxi-column>
      <dxi-column [showInColumnChooser]="false" [visible]="(permissions.dlte_in==1)?true:false" type="buttons"
        [width]="100" caption="Delete" cellTemplate="delTemplate">
        <div *dxTemplate="let data of 'delTemplate'">
          <div *ngIf="data.row.data.a_in ==1" class="cursor-pointer tblDelBtn" (click)="onCellClick(data)">
            Disable Monitoring
          </div>
          <div *ngIf="data.row.data.a_in ==0" class="cursor-pointer tblDelBtn" (click)="onCellenableClick(data)">
            Enable Monitoring
          </div>
        </div>
      </dxi-column>
    </dx-data-grid>
  </div>
  <!-- sidebar -->
  <ds-sidebar class="form-panel myPrfleSidebar" name="addFormPanel" position="right" [invisibleOverlay]="false">
    <ds-loading *ngIf="oltLoader"></ds-loading>
    <ng-container>
      <div fxLayout="column" fxLayoutAlign="space-between center">
        <mat-toolbar class="side-bar-header-color">
          <div fxLayout="row" fxLayoutAlign="start" fxLayout.gt-xs="row" fxLayoutAlign.gt-xs="space-between"
            class="w-100-p">
            <div fxFlex fxFlex.gt-lg="90%" fxFlex.gt-md="90%" fxFlex.gt-sm="100%" fxFlex.gt-xs="100%">
              <span>{{leftsidebarHdng}}</span>
            </div>
            <div fxFlex fxFlex.gt-lg="10%" fxFlex.gt-md="10%" fxFlex.gt-sm="100%" fxFlex.gt-xs="100%"
              class="text-right">
              <span>
                <mat-icon matTooltip="close" (click)="opensideBar('addFormPanel',null,null)" class="closeSidebar">cancel
                </mat-icon>
              </span>
            </div>
          </div>
        </mat-toolbar>
        <form [formGroup]="formOlt" style="width:80%" class="mt-12">
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Select District<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <mat-select placeholder="Select Dstrict"  [(ngModel)]="selectedDsrt"
                  (selectionChange)="getMndlLst(selectedDsrt)" formControlName="dstrt_id" matInput required>
                  <mat-option *ngFor="let crddta of dstlst" [value]="crddta.dstrt_id">
                    {{crddta.dstrt_nm}}
                  </mat-option>
                </mat-select>
                <mat-error>District is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Select Mandal<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <mat-select placeholder="Select Mandal" [(ngModel)]="selectedMndl"
                  (selectionChange)="getSubstations(selectedMndl)" formControlName="mndl_id" matInput required>
                  <mat-option *ngFor="let mndl of mnadlLst" [value]="mndl.mndl_nu">
                    {{mndl.mndl_nm}}
                  </mat-option>
                </mat-select>
                <mat-error>Mandal is required!</mat-error>
              </mat-form-field>
            </div>
          </div>

          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Select Substitution Name<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <mat-select placeholder="Select Substitution Name" formControlName="sbstn_id" matInput required>
                  <mat-option *ngFor="let sb of substnlst" [value]="sb.sbstn_id">
                    {{sb.sbstn_nm}}
                  </mat-option>
                </mat-select>
                <mat-error>Substitution Name is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">OLT Name<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <input name="name" placeholder="Enter OLT Name" formControlName="olt_nm" matInput>
                <mat-error>OLT Name is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Select OLT Substation type<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <!-- <mat-label>Select OLT type</mat-label> -->
                <mat-select placeholder="Select OLT type" formControlName="olt_typ" matInput required>
                  <mat-option *ngFor="let sbt of substnlsttype" [value]="sbt.sbstn_type_id">
                    {{sbt.sbstn_type_nm}}
                  </mat-option>
                </mat-select>
                <mat-error>OLT type is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">OLT Serial No<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <input name="name" placeholder="Enter OLT Serial No" formControlName="olt_srl_no" matInput required>
                <mat-error>OLT Serial No is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">POP OLT IP Address<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <input name="POP OLT Ip Address" placeholder="Enter POP OLT Ip Address" formControlName="olt_ip_adrs" matInput required>
                <mat-error>POP OLT IP Address is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">OLT Access Code<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <!-- <mat-label>OLT Access Code</mat-label> -->
                <input name="OLT Access Code" placeholder="Enter POP OLT Access Code" formControlName="olt_acces_cd" matInput required>
                <mat-error>OLT Access Code is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Label<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <!-- <mat-label>Label Name</mat-label> -->
                <input name="Label name" placeholder="Enter POP OLT Label" formControlName="lbl_nm" matInput required>
                <mat-error>Label is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Node<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <!-- <mat-label>Node Name</mat-label> -->
                <input name="node name" placeholder="Enter POP OLT Node" formControlName="nde_nm" matInput required>
                <mat-error>Node is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Select OLT Port<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <!-- <mat-label>Select OLT type</mat-label> -->
                <mat-select placeholder="Select OLT Port" formControlName="olt_prt" matInput required>
                  <mat-option *ngFor="let op of oltport" [value]="op.port_no">
                    {{op.port_no}}
                  </mat-option>
                </mat-select>
                <mat-error>OLT port is required!</mat-error>
              </mat-form-field>
            </div>
          </div>

        </form>

        <div class="m-0 p-16" fxLayout="row" fxLayoutAlign="end center">

          <div fxFlex fxFlex.gt-lg="50%" fxFlex.gt-md="50%" fxFlex.gt-sm="100%" fxFlex.gt-xs="100%"
            *ngIf="deleteEmplye == true">
            <button mat-button class="mat-raised-button  deleteBtn-color" aria-label="Delete" matTooltip="Delete"
              (click)="delEmployee()">
              DELETE
            </button>
          </div>

          <div fxFlex fxFlex.gt-lg="50%" fxFlex.gt-md="50%" fxFlex.gt-sm="100%" fxFlex.gt-xs="100%"
            *ngIf="deleteEmplye == false">
            <button mat-flat-button type="submit" class="mat-raised-button w-100-p gtDtls" aria-label="SAVE"
              (click)="saveOlt()">
              SAVE
            </button>
          </div>
          <div fxFlex fxFlex.gt-lg="50%" fxFlex.gt-md="50%" fxFlex.gt-sm="100%" fxFlex.gt-xs="100%">
            <button mat-flat-button type="submit" class="mat-raised-button  cnclBtn-color ml-8" aria-label="SAVE"
              (click)="opensideBar('addFormPanel',null,null)">
              CANCEL
            </button>
          </div>

        </div>
      </div>
    </ng-container>
  </ds-sidebar>


  <!-- sidebar -->


</div>