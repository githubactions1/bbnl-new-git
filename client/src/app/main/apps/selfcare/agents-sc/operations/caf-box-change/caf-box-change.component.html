<div class="page-layout simple pageBackground">
  <pg-top-header [headerDtls]="getHeaderDtls()"></pg-top-header>
  <div class="row fltrcrd p-4 m-8">
    <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="17%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8" >
      <div class="form-label">Aadhaar Number</div>
      <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
        <input matInput type="text" [(ngModel)]="aadharnumber" [ngModelOptions]="{standalone: true}" required>
      </mat-form-field>
    </div>
    
    <div fxFlex="100" fxFlex.gt-lg="3%" fxFlex.gt-md="3%" fxFlex.gt-sm="3%" fxFlex.gt-xs="3%" class="px-8">
      <p class = "orcls">(OR)</p>
    </div>

    <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="17%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8">
      <div class="form-label">Mobile Number</div>
      <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
        <input matInput type="text" [(ngModel)]="mobilenumber" [ngModelOptions]="{standalone: true}" required>
      </mat-form-field>
    </div>
    <div  fxFlex="100" fxFlex.gt-lg="3%" fxFlex.gt-md="3%" fxFlex.gt-sm="3%" fxFlex.gt-xs="3%" class="px-8">
      <p class = "orcls">(OR)</p>
    </div>
   
    <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="17%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8">
      <div class="form-label">CAF Number</div>
      <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
        <input matInput type="text" [(ngModel)]="cafnumber" [ngModelOptions]="{standalone: true}" required>
      </mat-form-field>
    </div>
    <div  fxFlex="100" fxFlex.gt-lg="3%" fxFlex.gt-md="3%" fxFlex.gt-sm="3%" fxFlex.gt-xs="3%" class="px-8" *ngIf="agentDropDwnView == true">
      <p class = "orcls">(OR)</p>
    </div>
    <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="17%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8" *ngIf="agentDropDwnView == true">
      <form  fxLayout="column" [formGroup]='lmoPymntsForm'>
      <div class="form-label">LMO Code</div>
      <!-- <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
        <input matInput type="text" [(ngModel)]="cafnumber" [ngModelOptions]="{standalone: true}" required>
      </mat-form-field> -->
      <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
        <input matInput placeholder="Search LMO Code" aria-label="State" [matAutocomplete]="auto"
          formControlName="lmoCode">
        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
          <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
          <ng-container *ngIf="!isLoading">
            <mat-option *ngFor="let agent of filteredAgents;trackBy:trackByfunction" [value]="agent">
              <span><b>{{agent.agnt_nm}}</b> ({{agent.agnt_cd}})</span>
            </mat-option>
          </ng-container>
        </mat-autocomplete>
        <!-- <mat-error>LMO is required!</mat-error> -->
      </mat-form-field>
    </form>
    </div>
 
    <div fxFlex="17" fxFlex.xs="100" class="px-8 gtDtlsBtn">
      <button mat-raised-button color="primary" (click)="getcafdetails();" class="gtDtls">GET DETAILS</button>
    </div>
  </div>
  <!-- <div class="row p-20" *ngIf="tableView == false">
    <div class="col-xl-4 col-lg-4 col-md-4 col-12"></div> 
    <div class="fltrcrd">
      <p class="textCss">Please Select the Above to get Data</p>
    </div>
    <div class="col-xl-4 col-lg-4 col-md-4 col-12"></div> 
   
  </div> -->

  <div class="ds-card m-12 p-4 font-weight-600 text-center slctGtDta" *ngIf="tableView == false">Please Select the Above to
    get Data</div>

  <!-- <div class="row p-20" *ngIf="tableView == true"> -->
    <!-- <p class="hdngtitle pl-8">BOX Change</p> -->
    <div class="ds-card m-12" *ngIf="tableView == true">
      <dx-data-grid class="p-8" id="gridContainer" [allowColumnResizing]="true"   [dataSource]="cafData" [remoteOperations]="false" [allowColumnReordering]="true"
        [rowAlternationEnabled]="true" [showColumnLines]="true" [showRowLines]="true" [showBorders]="true" style="width:100%">
        <dxo-selection *ngIf="(permissions.slct_in==1)?true:false" mode="single"></dxo-selection>
        <dxo-paging [pageSize]="10"></dxo-paging>
        <dxo-pager [visible]="true" [showPageSizeSelector]="true" [allowedPageSizes]="[10, 25, 50, 100]" [showInfo]="true"></dxo-pager>
        <dxo-search-panel [visible]="true" [highlightCaseSensitive]="true"></dxo-search-panel>
        <dxo-filter-panel [visible]="true"></dxo-filter-panel>
        <dxo-group-panel [visible]="true"></dxo-group-panel>
        <dxo-grouping [autoExpandAll]="false"></dxo-grouping>
        <dxo-column-chooser [enabled]="true" mode="select">
        </dxo-column-chooser>
        <dxo-export [enabled]="(permissions.exprt_in==1)?true:false" [allowExportSelectedData]="true" fileName="BOX Change"></dxo-export>
        <dxo-filter-row [visible]="true"></dxo-filter-row>
        <dxi-column [allowResizing]="true" *ngFor="let f of columnDefs" [visible]="!f.hide" [dataField]="f.field" [caption]="f.headerName"
          [alignment]="f.alignment" [width]="f.width" [allowFiltering]="f.filter" [allowHeaderFiltering]="f.filter"></dxi-column>
          <dxi-column [showInColumnChooser]="false"  type="buttons" [width]="170" caption="" cellTemplate="editTemplate">
            <div *dxTemplate="let data of 'editTemplate'">  
               <div class="tblEdtBtn" (click)="onCellClick(data)">  
                 Combo Box Change  
               </div>  
           </div>
       </dxi-column>
       <!-- <dxi-column [showInColumnChooser]="false"  type="buttons" [width]="170" caption="" cellTemplate="delTemplate" >
            <div *dxTemplate="let data of 'delTemplate'">  
               <div class="tblDelBtn" (click)="onCellClickdouble(data)">  
                Double Box Change  
               </div>  
           </div>
       </dxi-column> -->
        <!-- <dxi-column [showInColumnChooser]="false" [visible]="(permissions.updt_in==1)?true:false" type="buttons"
        [width]="150" caption="" cellTemplate="editTemplate">
        <div *dxTemplate="let data of 'editTemplate'">
          <div class="cursor-pointer" (click)="onCellClick(data)">
            <button class="slctBtn">Double Box Change</button>
          </div>
        </div>
      </dxi-column> -->
        <!-- onCellClickdouble -->
      </dx-data-grid>
    </div>
    <!-- <div *ngIf="(permissions.slct_in==1)?false:true" class="permMsg">{{mainMessage}}</div> -->
  <!-- </div> -->
</div>
<ds-sidebar class="form-panel ds-form-sidebar tmpSdBar" name="addFormPanel" position="right" [invisibleOverlay]="false">
  <ng-container  *ngIf="sidebar">
    <ds-loading *ngIf="pageLdr"></ds-loading>
    <div fxLayout="column">
      <div>
        <div class="card-header crdHdng">Combo Box Change
          <mat-icon matTooltip="close" (click)="closeSideBar()" class="closeSidebar" style="float:right">
            cancel</mat-icon>
        </div>
        <div class="card-body" fxLayout.lt-md="column" fxLayout.xs="column">
          <div fxLayout="row" fxLayout.xs="column">
            <div fxFlex="100" fxFlex.xs="100" class="px-8">
              <p class="sdHdrTxt">Assigned IPTV</p>
            </div>
          </div>
          <div fxLayout="row" fxLayout.xs="column">
            <div fxFlex="50" fxFlex.xs="50" class="px-8">
              <div class="form-label"></div>
              <mat-label>
                <div class="lbl mndlTitle">CAF Number</div>
                <div class="lbl_cntnt mndalName">{{this.selectedData.caf_nu}}</div>
              </mat-label><br>
            </div>
            <div fxFlex="50" fxFlex.xs="50" class="px-8">
              <mat-label>
                <div class="lbl mndlTitle">Subscriber Code</div>
                <div class="lbl_cntnt mndalName">{{this.selectedData.mdlwe_sbscr_id}}</div>
              </mat-label><br>
            </div>
          </div>
          <div fxLayout="row" fxLayout.xs="column">
            <div fxFlex="50" fxFlex.xs="50" class="px-8">
              <mat-label>
                <div class="lbl mndlTitle">Old IPTV Serial Number</div>
                <div class="lbl_cntnt mndalName">{{this.selectedData.iptv_srl_nu}}</div>
              </mat-label><br>
            </div>
            <div fxFlex="50" fxFlex.xs="50" class="px-8">
              <mat-label>
                <div class="lbl mndlTitle">Old IPTV MAC Address</div>
                <div class="lbl_cntnt mndalName">{{this.selectedData.iptv_mac_addr_tx}}</div>
              </mat-label><br>
            </div>
          </div>
          <div fxLayout="row" fxLayout.xs="column">
            <div fxFlex="50" fxFlex.xs="50" class="px-8">
              <mat-label>
                <div class="lbl mndlTitle">Old ONU Serial Number</div>
                <div class="lbl_cntnt mndalName">{{this.selectedData.onu_srl_nu}}</div>
              </mat-label><br>
            </div>
            <div fxFlex="50" fxFlex.xs="50" class="px-8">
              <mat-label>
                <div class="lbl mndlTitle">Old ONU MAC Address</div>
                <div class="lbl_cntnt mndalName">{{this.selectedData.onu_mac_addr_tx}}</div>
              </mat-label><br>
            </div>
          </div>
          <div fxLayout="row" fxLayout.xs="column">
            <div fxFlex="100" fxFlex.xs="100" class="px-8">
              <p *ngIf="iptvView == true" class="sdHdrTxt">NEW IPTV & ONU</p>
              <p *ngIf="iptvView == false" class="sdHdrTxt">NEW ONU</p>
            </div>
          </div>
          <div fxLayout="row" fxLayout.xs="column" *ngIf="iptvView == true">
            <div fxFlex="50" fxFlex.xs="50" class="px-8">
              <div class="form-label">New IPTV Serial Number</div>
              <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
                <input matInput type="text" [(ngModel)]="newIptvSrNu" [ngModelOptions]="{standalone: true}" (input)="onSearchChange($event.target.value)" #myInput>
              </mat-form-field>
            </div>
            <div fxFlex="50" fxFlex.xs="50" class="px-8">
              <mat-label>
                <div class="lbl mndlTitle">New IPTV MAC Address</div>
                <div class="lbl_cntnt mndalName" *ngIf="viewIptvmacAdress == true">{{iptvData[0].iptv_mac_addr}}</div>
                <div class="lbl_cntnt mndalName" *ngIf="viewIptvmacAdress == false"></div>
              </mat-label><br>
            </div>
          </div>
          <div fxLayout="row" fxLayout.xs="column">
            <div fxFlex="50" fxFlex.xs="50" class="px-8">
              <div class="form-label">New ONU Serial Number</div>
              <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
                <input matInput type="text" [(ngModel)]="newOnuSrNu" [ngModelOptions]="{standalone: true}" (input)="onchange($event.target.value)" #myInput>
              </mat-form-field>
            </div>
            <div fxFlex="50" fxFlex.xs="50" class="px-8">
              <mat-label>
                <div class="lbl mndlTitle">New ONU MAC Address</div>
                <div class="lbl_cntnt mndalName" *ngIf="viewonumacAdress == true">{{onuData[0].onu_mac_addr}}</div>
                <div class="lbl_cntnt mndalName" *ngIf="viewonumacAdress == false"></div>
              </mat-label><br>
            </div>
          </div>
          <div fxLayout="row" fxLayout.xs="column">
            <div fxFlex="50" fxFlex.xs="50" class="px-8">
              <div class="form-label">Reason For Change</div>
              <mat-form-field appearance="outline">
                <mat-select [(value)]="reason" required>
                  <mat-option [value]="1">Product Change</mat-option>
                  <mat-option [value]="2">Defective Device</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div fxFlex="50" fxFlex.xs="50" class="px-8">
              <div class="form-label">Change Comment</div>
              <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
                <input matInput type="text" [(ngModel)]="comment" [ngModelOptions]="{standalone: true}" required>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout="row" fxLayout.xs="row"  class ="btnStles">
            <div fxFlex.gt-lg="20%" fxFlex.gt-md="0%" fxFlex.gt-sm="0%"  fxFlex.xs="0"></div>
          <div fxFlex.gt-lg="30%" fxFlex.gt-md="50%" fxFlex.gt-sm="50%"  fxFlex.xs="50" class="px-8" *ngIf="iptvView == true">
            <button mat-raised-button type="submit" class="saveBtn-color updtClseBtn" aria-label="SAVE"
              (click)="update()" *ngIf="this.reason>0 && this.comment.length>0 && this.iptvData.length>0 && this.onuData.length>0">
              UPDATE
            </button>
            <button mat-raised-button type="submit" class="updtClseBtn" aria-label="SAVE" [disabled]="true"
            *ngIf="this.reason <1 || this.comment.length==0 || this.onuData.length==0 || this.iptvData.length==0">
            UPDATE
          </button>
          </div>
          <div fxFlex.gt-lg="30%" fxFlex.gt-md="50%" fxFlex.gt-sm="50%"  fxFlex.xs="50" class="px-8" *ngIf="iptvView != true">
            <button mat-raised-button type="submit" class="saveBtn-color updtClseBtn" aria-label="SAVE"
            (click)="update()"  *ngIf="this.reason.length>0 && this.comment.length>0 && this.onuData.length>0">
            UPDATE
          </button>
          <button mat-raised-button type="submit" class="updtClseBtn" aria-label="SAVE" [disabled]="true"
           *ngIf="this.reason.length==0 || this.comment.length==0 || this.onuData.length==0">
          UPDATE
        </button>
          </div>
        
         
          <div fxFlex.gt-lg="30%" fxFlex.gt-md="50%" fxFlex.gt-sm="50%"  fxFlex.xs="50" class="px-8">
            <button mat-raised-button type="close" aria-label="CANCEL" (click)="closeSideBar()" class="updtClseBtn" >
              CANCEL
            </button>
          </div>
          <div fxFlex.gt-lg="20%" fxFlex.gt-md="0%" fxFlex.gt-sm="0%"  fxFlex.xs="0"></div>
        </div>

        </div>
      </div>
    </div>
  </ng-container>
</ds-sidebar>