 <div class="page-layout simple pageBackground prtAsgnCmpnt" *ngIf="permissions">
  <pg-top-header [headerDtls]="getHeaderDtls()"></pg-top-header>
  <mat-tab-group (selectedTabChange)="tabChangeFn($event)">
    <mat-tab label="SUSPENSION/RESUME" >
      <div class="ds-card m-12 mt-4 p-4">
      <div fxLayout="row" fxLayout.sm="column" fxLayout.xs="column">
        <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="20%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8">
          <div class="form-label">Aadhar Number</div>
          <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
            <input matInput type="text" [(ngModel)]="reaadharnumber" [ngModelOptions]="{standalone: true}" required>
          </mat-form-field>
        </div>
    
        <div fxFlex="100" fxFlex.gt-lg="3%" fxFlex.gt-md="7%" fxFlex.gt-sm="3%" fxFlex.gt-xs="3%" class="px-8">
          <p class="orTxtColor  text-center">-OR-</p>
        </div>
    
        <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="20%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8">
          <div class="form-label">Mobile Number</div>
          <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
            <input matInput type="text" [(ngModel)]="remobilenumber" [ngModelOptions]="{standalone: true}" required>
          </mat-form-field>
        </div>
        <div fxFlex="100" fxFlex.gt-lg="3%" fxFlex.gt-md="7%" fxFlex.gt-sm="3%" fxFlex.gt-xs="3%" class="px-8">
          <p class="orTxtColor text-center">-OR-</p>
        </div>
    
        <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="20%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8">
          <div class="form-label">CAF Number</div>
          <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
            <input matInput type="text" [(ngModel)]="recafnumber" [ngModelOptions]="{standalone: true}" required>
          </mat-form-field>
        </div>
    
        <div  fxFlex="100" fxFlex.gt-lg="3%" fxFlex.gt-md="7%" fxFlex.gt-sm="3%" fxFlex.gt-xs="3%" class="px-8" *ngIf="agentDropDwnView == true">
          <p class="orTxtColor  text-center">-OR-</p>
        </div>
        <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="20%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8" *ngIf="agentDropDwnView == true">
          <form fxLayout="column" [formGroup]='lmoPymntsForm'>
          <div class="form-label">LMO Code</div>
          <!-- <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
            <input matInput type="text" [(ngModel)]="cafnumber" [ngModelOptions]="{standalone: true}" required>
          </mat-form-field> -->
          <mat-form-field appearance="outline">
            <input matInput placeholder="Search LMO Code" aria-label="State" [matAutocomplete]="auto"
              formControlName="lmoCode">
            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
              <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
              <ng-container *ngIf="!isLoading">
                <mat-option *ngFor="let agent of filteredAgents;trackBy:trackByfunction" [value]="agent">
                  <span><b>{{agent.agnt_nm}}</b> ({{agent.agnt_cd}})</span>
                </mat-option>
              </ng-container>
            </mat-autocomplete>
            <!-- <mat-error>LMO is required!</mat-error> -->
          </mat-form-field>
        </form>
        </div>
       
    
    
        <div fxFlex="17" fxFlex.xs="100" class="px-8 gtDtlsBtn">
          <button mat-raised-button color="primary" (click)="getsuspnForResume();" class="gtDtls">GET DETAILS</button>
        </div>
		<div fxFlex="17" fxFlex.xs="100" class="px-8 gtDtlsBtn">
          <button mat-raised-button color="primary" (click)="suspsnDetails();" class="gtDtls">Suspend Cafs</button>
        </div>
      </div>
    </div>
      <!-- <div class="row p-20" *ngIf="tableView == false">
        <div class="col-xl-3 col-lg-3 col-md-3 col-12"></div>
        <div class="col-xl-3 col-lg-3 col-md-3 col-12 fltrcrd">
          <p class="textCss">Please Select the Above to get Data</p>
        </div>
        <div class="col-xl-3 col-lg-3 col-md-3 col-12"></div>
       
      </div> -->
      <div class="ds-card m-12 p-4 font-weight-600 text-center slctGtDta" *ngIf="tableView == false">Please Select the Above to
        get Data</div>
      <ds-loading *ngIf="pageLdr"></ds-loading>
      <!-- <div class="row p-20" *ngIf="tableView == true"> -->
        <div class="ds-card m-12" *ngIf="permissions">
          <dx-data-grid  [allowColumnResizing]="true"  class="p-4" id="gridContainer" [dataSource]="susCafData" [remoteOperations]="false"
            [allowColumnReordering]="true" [rowAlternationEnabled]="true" [showColumnLines]="true" [showRowLines]="true"
            [showBorders]="true" style="width:100%">
            <dxo-selection mode="single"></dxo-selection>
            <dxo-paging [pageSize]="10"></dxo-paging>
            <dxo-pager [visible]="true" [showPageSizeSelector]="true" [allowedPageSizes]="[10, 25, 50, 100]" [showInfo]="true"></dxo-pager>
            <dxo-search-panel [visible]="true" [highlightCaseSensitive]="true"></dxo-search-panel>
            <dxo-filter-panel [visible]="true"></dxo-filter-panel>
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            <dxo-grouping [autoExpandAll]="false"></dxo-grouping>
            <dxo-column-chooser [enabled]="true" mode="select">
            </dxo-column-chooser>
            <dxo-export [enabled]="(permissions.exprt_in==1)?true:false" [allowExportSelectedData]="true" fileName="CAF Suspensions"></dxo-export>
            <dxo-filter-row [visible]="true"></dxo-filter-row>
            <dxi-column  [allowResizing]="true"*ngFor="let f of columnDefs" [visible]="!f.hide" [dataField]="f.field" [caption]="f.headerName"
              alignment="f.cellStyle.text-align" [width]="f.width" [allowFiltering]="f.filter" [allowHeaderFiltering]="f.filter"></dxi-column>
            <dxi-column  [allowResizing]="true"[showInColumnChooser]="false" [visible]="(permissions.updt_in==1)?true:false" type="buttons"
              [width]="100" caption="" cellTemplate="editTemplate">
              <div *dxTemplate="let data of 'editTemplate'">
                <div class="cursor-pointer" (click)="onactiveCellClick(data)">
                  <button class="slctBtn">Active</button>
                </div>
              </div>
            </dxi-column>
          </dx-data-grid>
        </div>
        <div *ngIf="(permissions.slct_in==1)?false:true" class="permMsg">{{mainMessage}}</div>
      <!-- </div> -->
    </mat-tab>
    <mat-tab label="PREVIOUS SUSPENSIONS">
      <div class="row" *ngIf="agentDropDwnView == true">
        <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="20%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8" >
          <form class=" p-8" fxLayout="column" [formGroup]='thirdFormGroup'>
          <div class="form-label">LMO Code</div>
          <mat-form-field appearance="outline">
            <input matInput placeholder="Search LMO Code" aria-label="State" [matAutocomplete]="auto"
              formControlName="lmoCdThrd">
            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
              <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
              <ng-container *ngIf="!isLoading">
                <mat-option *ngFor="let agent of filteredAgents;trackBy:trackByfunction" [value]="agent">
                  <span><b>{{agent.agnt_nm}}</b> ({{agent.agnt_cd}})</span>
                </mat-option>
              </ng-container>
            </mat-autocomplete>
            <!-- <mat-error>LMO is required!</mat-error> -->
          </mat-form-field>
        </form>
        </div>
        <div fxFlex="17" fxFlex.xs="100" class="px-8 gtDtlsBtn">
          <button mat-raised-button color="primary" (click)="previoususpenstion();" class="gtDtls">GET DETAILS</button>
        </div>
      </div>
      <!-- <div class="row p-20" *ngIf="prtableview == false">
        <div class="col-xl-3 col-lg-3 col-md-3 col-12"></div>
        <div class="col-xl-3 col-lg-3 col-md-3 col-12 fltrcrd">
          <p class="textCss">Please Select the Above to get Data</p>
        </div>
        <div class="col-xl-3 col-lg-3 col-md-3 col-12"></div>
       
      </div> -->

      <div class="ds-card m-12 p-4 font-weight-600 slctGtDta text-center"*ngIf="prtableview == false">Please Select the Above to
        get Data</div>
      <div class="row p-20" *ngIf="prtableview == true">
        <div class="ds-card grid" *ngIf="(permissions.slct_in==1)?true:false">
          <dx-data-grid  [allowColumnResizing]="true"  id="gridContainer" [dataSource]="prvioususpenstn" [remoteOperations]="false"
            [allowColumnReordering]="true" [rowAlternationEnabled]="true" [showColumnLines]="true" [showRowLines]="true"
            [showBorders]="true" style="width:100%">
            <dxo-selection mode="single"></dxo-selection>
            <dxo-paging [pageSize]="10"></dxo-paging>
            <dxo-pager [visible]="true" [showPageSizeSelector]="true" [allowedPageSizes]="[10, 25, 50, 100]" [showInfo]="true"></dxo-pager>
            <dxo-search-panel [visible]="true" [highlightCaseSensitive]="true"></dxo-search-panel>
            <dxo-filter-panel [visible]="true"></dxo-filter-panel>
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            <dxo-grouping [autoExpandAll]="false"></dxo-grouping>
            <dxo-column-chooser [enabled]="true" mode="select">
            </dxo-column-chooser>
            <dxo-export [enabled]="(permissions.exprt_in==1)?true:false" [allowExportSelectedData]="true" fileName="CAF Suspensions"></dxo-export>
            <dxo-filter-row [visible]="true"></dxo-filter-row>
            <dxi-column  [allowResizing]="true"*ngFor="let f of columnDefs" [visible]="!f.hide" [dataField]="f.field" [caption]="f.headerName"
              alignment="f.cellStyle.text-align" [width]="f.width" [allowFiltering]="f.filter" [allowHeaderFiltering]="f.filter"></dxi-column>
          </dx-data-grid>
        </div>
        <div *ngIf="(permissions.slct_in==1)?false:true" class="permMsg">{{mainMessage}}</div>
      </div>
    </mat-tab>
  </mat-tab-group>
 
</div>











<!-- sidebar -->
<ds-sidebar class="form-panel ds-form-sidebar tmpSdBar" name="addFormPanel" position="right" [invisibleOverlay]="false">
  <ng-container>
    <div fxLayout="column">
      <div class="card">
        <div class="card-header crdHdng">Customer Suspension
          <mat-icon matTooltip="close" (click)="closeSideBar()" class="closeSidebar" style="float:right">
            cancel</mat-icon>
        </div>

        <mat-horizontal-stepper [linear]="isLinear" #stepper>
          <mat-step [stepControl]="firstFormGroup">
            <form [formGroup]="firstFormGroup">
              <ng-template matStepLabel>Enter CAF/ADHAR/MOBILE Number</ng-template>
              <div class="row fltrcrd">
                <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="20%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8">
                  <div class="form-label">Aadhaar Number</div>
                  <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
                    <input matInput type="text" [(ngModel)]="aadharnumber" [ngModelOptions]="{standalone: true}"
                      required>
                  </mat-form-field>
                </div>

                <div fxFlex="100" fxFlex.gt-lg="4%" fxFlex.gt-md="4%" fxFlex.gt-sm="4%" fxFlex.gt-xs="4%" class="px-8">
                  <p class="orcls">(OR)</p>
                </div>

                <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="20%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8">
                  <div class="form-label">Mobile Number</div>
                  <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
                    <input matInput type="text" [(ngModel)]="mobilenumber" [ngModelOptions]="{standalone: true}"
                      required>
                  </mat-form-field>
                </div>
                <div fxFlex="100" fxFlex.gt-lg="4%" fxFlex.gt-md="4%" fxFlex.gt-sm="4%" fxFlex.gt-xs="4%" class="px-8">
                  <p class="orcls">(OR)</p>
                </div>

                <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="20%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8">
                  <div class="form-label">Caf Number</div>
                  <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
                    <input matInput type="text" [(ngModel)]="cafnumber" [ngModelOptions]="{standalone: true}" required>
                  </mat-form-field>
                </div>
                <div  fxFlex="100" fxFlex.gt-lg="4%" fxFlex.gt-md="4%" fxFlex.gt-sm="4%" fxFlex.gt-xs="4%" class="px-8" *ngIf="agentDropDwnViewScd == true">
                  <p class = "orcls">(OR)</p>
                </div>
                <div fxFlex="100" fxFlex.gt-lg="17%" fxFlex.gt-md="20%" fxFlex.gt-sm="17%" fxFlex.gt-xs="17%" class="px-8" *ngIf="agentDropDwnViewScd == true">
                  <!-- <form class=" p-8" fxLayout="column" [formGroup]='lmoPymntsForm'> -->
                  <div class="form-label">LMO Code</div>
                  <!-- <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
                    <input matInput type="text" [(ngModel)]="cafnumber" [ngModelOptions]="{standalone: true}" required>
                  </mat-form-field> -->
                  <mat-form-field appearance="outline">
                    <input matInput placeholder="Search LMO Code" aria-label="State" [matAutocomplete]="auto"
                      formControlName="scdlmoCode">
                    <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                      <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                      <ng-container *ngIf="!isLoading">
                        <mat-option *ngFor="let agent of filteredAgents;trackBy:trackByfunction" [value]="agent">
                          <span><b>{{agent.agnt_nm}}</b> ({{agent.agnt_cd}})</span>
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                    <!-- <mat-error>LMO is required!</mat-error> -->
                  </mat-form-field>
                <!-- </form> -->
                </div>
               

                <div fxFlex="17" fxFlex.xs="100" class="px-8 gtDtlsBtn">
                  <button mat-raised-button color="primary" (click)="getdetails();" class="gtDtls">GET DETAILS</button>
                </div>
              </div>
              <!-- <div class="row p-20" *ngIf="tableViewScd == false">
                <p>Please Select the Above to get Data</p>
              </div> -->

              <div class="ds-card m-12 p-4 font-weight-600 slctGtDta text-center" *ngIf="tableViewScd == false">Please Select the Above to
                get Data</div>


              <ds-loading *ngIf="pageLdr"></ds-loading>
              <div class="row" *ngIf="tableViewScd == true || permissions">
                <div class="ds-card grid" *ngIf="permissions" >
                  <dx-data-grid  [allowColumnResizing]="true"  id="gridContainer" [dataSource]="cafData" [remoteOperations]="false"
                    [allowColumnReordering]="true" [rowAlternationEnabled]="true" [showColumnLines]="true"
                    [showRowLines]="true" [showBorders]="true" style="width:100%" *ngIf="(permissions.slct_in==1)?true:false">
                    <dxo-selection mode="single"></dxo-selection>
                    <dxo-paging [pageSize]="10"></dxo-paging>
                    <dxo-pager [visible]="true" [showPageSizeSelector]="true" [allowedPageSizes]="[10, 25, 50, 100]" [showInfo]="true"></dxo-pager>
                    <dxo-search-panel [visible]="true" [highlightCaseSensitive]="true"></dxo-search-panel>
                    <dxo-filter-panel [visible]="true"></dxo-filter-panel>
                    <dxo-group-panel [visible]="true"></dxo-group-panel>
                    <dxo-grouping [autoExpandAll]="false"></dxo-grouping>
                    <dxo-column-chooser [enabled]="true" mode="select">
                    </dxo-column-chooser>
                    <dxo-export [enabled]="(permissions.exprt_in==1)?true:false" [allowExportSelectedData]="true" fileName="CAF Suspensions">
                    </dxo-export>
                    <dxo-filter-row [visible]="true"></dxo-filter-row>
                    <dxi-column  [allowResizing]="true"*ngFor="let f of columnDefs" [visible]="!f.hide" [dataField]="f.field"
                      [caption]="f.headerName" alignment="f.cellStyle.text-align" [width]="f.width" [allowFiltering]="f.filter" [allowHeaderFiltering]="f.filter"></dxi-column>
                    <dxi-column  [allowResizing]="true"[showInColumnChooser]="false" [visible]="(permissions.updt_in==1)?true:false"
                      type="buttons" [width]="100" caption="" cellTemplate="editTemplate">
                      <div *dxTemplate="let data of 'editTemplate'">
                        <div class="cursor-pointer" (click)="onCellClick(data)">
                          <button class="slctBtn" matStepperNext>Suspend</button>
                          <!-- <mat-radio-button></mat-radio-button> -->
                        </div>
                      </div>
                    </dxi-column>
                  </dx-data-grid>
                </div>
                <div *ngIf="(permissions.slct_in==1)?false:true" class="permMsg">{{mainMessage}}</div>
              </div>
              <!-- <div fxLayout="row">
                <div fxFlex="100%" fxFlex.gt-lg="90%" fxFlex.gt-md="90%" fxFlex.gt-sm="90%" fxFlex.gt-xs="90%"></div>
                <div fxFlex="100%" fxFlex.gt-lg="10%" fxFlex.gt-md="10%" fxFlex.gt-sm="10%" fxFlex.gt-xs="10%"><button
                    mat-raised-button color="primary" matStepperNext>Next</button></div>
              </div> -->
            </form>
          </mat-step>
          <mat-step [stepControl]="secondFormGroup">
            <form [formGroup]="secondFormGroup">
              <ng-template matStepLabel>Comment</ng-template>
              <div class="row">
                <div fxFlex="5%" fxFlex.xs="5%" class="px-8"></div>
                <div fxFlex="100%" fxFlex.gt-lg="20%" fxFlex.gt-md="20%" fxFlex.gt-sm="20%" fxFlex.gt-xs="20%">
                  <div class="form-label">Reason For Suspension</div>
                  <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
                    <textarea placeholder="Write a Comment" matInput [(ngModel)]="suspnReason"
                    [ngModelOptions]="{standalone: true}" required></textarea>
                    <!-- <input matInput type="text" [(ngModel)]="suspnReason" [ngModelOptions]="{standalone: true}"
                      #myInput> -->
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div fxFlex="85" fxFlex.xs="85" class="px-8"></div>
                <button mat-raised-button matStepperPrevious class="m-2">Back</button>
                <!-- <button mat-raised-button color="warn" (click)="stepper.reset()" class = "m-2">Reset</button> -->
                <button mat-raised-button color="primary" (click)="save()" class="m-2 gtDtls"> Save</button>
              </div>
            </form>
          </mat-step>
        </mat-horizontal-stepper>
      </div>
    </div>
  </ng-container>
</ds-sidebar>
<!-- sidebar -->