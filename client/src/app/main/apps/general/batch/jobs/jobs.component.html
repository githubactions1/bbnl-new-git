<div class="page-layout blank usrEmplye pageBackground cusAcntCmpnt">
  <pg-top-header [headerDtls]="getHeaderDtls()"></pg-top-header>
  <div fxLayout="row">
    <div fxFlex="80"></div>
    <div fxFlex="16">

      <!-- <button class="addBtn-color mb-8 mt-8 mat-raised-button mat-primary" color="primary" mat-raised-button=""
        style="float:right" (click)="opensideBar('addFormPanel',null)">
        <span class="mat-button-wrapper">
          <mat-icon class="addfld-icon-color mat-icon material-icons mat-icon-no-color" role="img" aria-hidden="true">
            person</mat-icon>
          <span class="pt-2">&nbsp;Add New Customer</span>
        </span>
      </button> -->

      <!-- <button mat-raised-button color="primary" class="m-16 mr-40 addBtn addBtn-color" style="float:right"
        *ngIf="showBckBtn" (click)="bckBtn()">

        <span class="pt-2">Back</span>
      </button> -->
    </div>
  </div>

  <div class="pt-0">
    <div class="ds-card m-12">
      <div class="ds-card grid">
        <dx-data-grid id="gridContainer" [dataSource]="rowData" [remoteOperations]="false"
          [allowColumnReordering]="true"
[allowColumnResizing]="true" [rowAlternationEnabled]="true" [showColumnLines]="true" [showRowLines]="true"
          [showBorders]="true" style="width:100%" [masterDetail]="{ enabled: true, template: 'detail' }">
          <!-- <dxo-selection mode="multiple"></dxo-selection> -->
          <dxo-paging [pageSize]="10"></dxo-paging>
          <dxo-pager [visible]="true" [showPageSizeSelector]="true" [showInfo]="true"
            [allowedPageSizes]="[10, 25, 50, 100]"></dxo-pager>
          <dxo-search-panel [visible]="true" [highlightCaseSensitive]="true"></dxo-search-panel>
          <dxo-filter-panel [visible]="true"></dxo-filter-panel>
          <dxo-group-panel [visible]="true"></dxo-group-panel>
          <dxo-grouping [autoExpandAll]="false"></dxo-grouping>
          <dxo-column-chooser [enabled]="true" mode="select">
            <!-- or "select" -->
          </dxo-column-chooser>
          <dxo-export [enabled]="(user.permissions.exprt_in==1)?true:false" [allowExportSelectedData]="true" fileName="Batch Jobs List"></dxo-export>
          <dxo-filter-row [visible]="true"></dxo-filter-row>
          <dxi-column *ngFor="let f of columnDefs" [visible]="!f.hide" [dataField]="f.field" [caption]="f.headerName"
            alignment="f.cellStyle.text-align" [width]="f.width" [allowResizing]="true" [alignment]="f.alignment"
            [allowFiltering]="f.filter" [allowHeaderFiltering]="f.filter"></dxi-column>

          <dxi-column [showInColumnChooser]="false" [visible]="(user.permissions.updt_in==1)?true:false" type="buttons"
            [width]="100" cellTemplate="runTemplate" caption="Run">
            <div *dxTemplate="let data of 'runTemplate'">
              <div class="tblVwBtn cursor-pointer" (click)="onRunCellClick(data)">
                Run
              </div>
            </div>
          </dxi-column>
          <dxi-column [showInColumnChooser]="false" [visible]="(user.permissions.updt_in==1)?true:false" type="buttons"
            [width]="100" cellTemplate="addTemplate" caption="Schedule">
            <div *dxTemplate="let data of 'addTemplate'">
              <div class="tblEdtBtn cursor-pointer" (click)="addform()">
                Add
              </div>
            </div>
          </dxi-column>
          <dxi-column [showInColumnChooser]="false" [visible]="(user.permissions.updt_in==1)?true:false" type="buttons"
            [width]="100" cellTemplate="taskTemplate" caption="Tasks">
            <div *dxTemplate="let data of 'taskTemplate'">
              <div class="tblVwBtn cursor-pointer" (click)="onTaskCellClick(data)">
                View Tasks
              </div>
            </div>
          </dxi-column>
          <dxi-column [showInColumnChooser]="false" [visible]="(user.permissions.updt_in==1)?true:false" type="buttons"
            [width]="100" cellTemplate="historyTemplate" caption="History">
            <div *dxTemplate="let data of 'historyTemplate'">
              <div class="tblEdtBtn cursor-pointer" (click)="onhisCellClick(data)">
                History
              </div>
            </div>

          </dxi-column>

          <!-- <div *ngIf="showTble">
          <div *dxTemplate="let h of hstrydata">
            <div class="master-detail-caption" style="font-size: 18px;margin-bottom: 2%;font-weight: 500;">
              {{hiii}}TASKS:</div>
            <dx-data-grid [dataSource]="h" [showBorders]="true" [columnAutoWidth]="true">
              <dxi-column dataField="Sno"></dxi-column>
              <dxi-column dataField="jb_nm"></dxi-column>
              <dxi-column dataField="tsk_nm"></dxi-column>
            </dx-data-grid>
          </div>
        </div> -->

          <div *dxTemplate="let employee of 'detail'">
            <!-- <div class="master-detail-caption" style="font-size: 18px;margin-bottom: 2%;font-weight: 500;">TASKS:</div> -->
            <dx-data-grid [dataSource]="employee.data.schedule" [showBorders]="true" [columnAutoWidth]="true"
              *ngIf="employee.data.schedule[0].schde_nm!=null">
              <dxi-column caption="Sno" dataField="Sno"></dxi-column>
              <dxi-column caption="Schedule Name" dataField="schde_nm"></dxi-column>
              <dxi-column caption="Schedule Description" dataField="schde_dscn_tx"></dxi-column>
              <dxi-column caption="Months" dataField="mnths_tx"></dxi-column>
              <dxi-column caption="Week Days" dataField="wkdys_tx"></dxi-column>
              <dxi-column caption="Date" dataField="dts_tx"></dxi-column>
              <dxi-column caption="Hours" dataField="hrs_tx"></dxi-column>
              <dxi-column caption="Minutes" dataField="mnts_tx"></dxi-column>
              <dxi-column [showInColumnChooser]="false" [visible]="(user.permissions.updt_in==1)?true:false" type="buttons"
                [width]="100" cellTemplate="editTemplate" caption="Edit">
                <div *dxTemplate="let data of 'editTemplate'">
                  <div class="cursor-pointer" (click)="oneditClick(data)">
                    EDIT
                  </div>
                </div>
              </dxi-column>
              <dxi-column [showInColumnChooser]="false" [visible]="(user.permissions.updt_in==1)?true:false" type="buttons"
                [width]="100" cellTemplate="deleteTemplate" caption="Delete">
                <div *dxTemplate="let data of 'deleteTemplate'">
                  <div class="cursor-pointer" (click)="ondeleteClick(data)">
                    DELETE
                  </div>
                </div>
              </dxi-column>
            </dx-data-grid>
            <div *ngIf="employee.data.schedule[0].schde_nm == null">
              No Schedules
            </div>
          </div>

        </dx-data-grid>

      </div>
    </div>
  </div>
  <ds-sidebar class="form-panel myPrfleSidebar ds-form-sidebar" name="addFormPanel" position="right"
    [invisibleOverlay]="false">
    <ng-container>
      <div class="ds-card" id="scrollTop">
        <!-- <div class="card"> -->
        <div *ngIf="showTble" class="card-header crdHdng">Batch Jobs History
          <mat-icon matTooltip="close" (click)="opensideBar('addFormPanel',null,null)" class="closeSidebar" style="float:right">cancel
          </mat-icon>
        </div>

        <div *ngIf="showTble" class="ds-card grid" style="background: white !important">
          <div class="ds-card">
            <dx-data-grid id="gridContainer" [dataSource]="hstrydata" [remoteOperations]="false"
              [allowColumnReordering]="true"
[allowColumnResizing]="true" [rowAlternationEnabled]="true" [showColumnLines]="true"
              [showRowLines]="true" [showBorders]="true" style="width:100%">
              <dxo-paging [pageSize]="10"></dxo-paging>
              <dxo-pager [visible]="true" [showPageSizeSelector]="true" [showInfo]="true"
                [allowedPageSizes]="[10, 25, 50, 100]"></dxo-pager>
              <dxi-column *ngFor="let h of columndef" [visible]="!h.hide" [dataField]="h.field" [caption]="h.headerName"
                alignment="h.cellStyle.text-align" [width]="h.width"></dxi-column>

              <dxi-column [showInColumnChooser]="false" [visible]="(user.permissions.updt_in==1)?true:false" type="buttons"
                [width]="100" cellTemplate="logTemplate" caption="Log">
                <div *dxTemplate="let data of 'logTemplate'">
                  <div class="cursor-pointer" (click)="onLogClick(data)">
                    LOG
                  </div>
                </div>
              </dxi-column>

            </dx-data-grid>
          </div>
          <div *ngIf="showlogdata">
            <div [innerHTML]="logdata"></div>
          </div>
        </div>

        <div *ngIf="!showedit && !showTble" class="card-header crdHdng sidebarhdng">Batch Jobs Tasks
          <mat-icon matTooltip="close" (click)="opensideBar('addFormPanel',null,null)" class="closeSidebar" style="float:right">cancel
          </mat-icon>
        </div>

        <div *ngIf="!showedit && !showTble" class="ds-card grid" style="background: white !important">
          <div class="ds-card" *ngFor="let task of tskData">
            <!-- <div> S.No: {{task.sno}}
            </div> -->
            <div>Task : {{task.tsk_nm}}
            </div>
            <div>Task Description : {{task.tsk_desc_tx}}
            </div>
            <div>Task Cateogory : {{task.tsk_ctgry_nm}}
            </div>

            <!-- <dx-data-grid id="gridContainer" [dataSource]="tskData" [remoteOperations]="false"
              [allowColumnReordering]="true"
[allowColumnResizing]="true" [rowAlternationEnabled]="true" [showColumnLines]="true"
              [showRowLines]="true" [showBorders]="true" style="width:100%">
              <dxo-paging [pageSize]="10"></dxo-paging>
              <dxo-pager [visible]="true" [showPageSizeSelector]="true" [showInfo]="true"
                [allowedPageSizes]="[10, 25, 50, 100]"></dxo-pager>
              <dxi-column *ngFor="let h of columntask" [visible]="!h.hide" [dataField]="h.field" [caption]="h.headerName"
                alignment="h.cellStyle.text-align" [width]="h.width"></dxi-column>
            </dx-data-grid> -->
          </div>
          <!-- <div *ngIf="showlogdata">
            <div [innerHTML]="logdata"></div>
          </div> -->
        </div>

        <div *ngIf="showedit && !showTble" class="card-header crdHdng">{{leftsidebarHdng}}
          <!-- <button mat-flat-button type="submit" class="mat-raised-button saveBtn-color" (click)="addform()"
            style="font-size: large; margin-left: 83%;cursor: pointer;">ADD
          </button> -->
          <mat-icon matTooltip="close" (click)="opensideBar('addFormPanel',null,null)" class="closeSidebar" style="float:right">cancel
          </mat-icon>
        </div>

        <!-- <div *ngIf="!showedit && !showTble" class="ds-card grid">
          <dx-data-grid id="gridContainer" [dataSource]="schData" [remoteOperations]="false"
            [allowColumnReordering]="true"
[allowColumnResizing]="true" [rowAlternationEnabled]="true" [showColumnLines]="true" [showRowLines]="true"
            [showBorders]="true" style="width:100%">
            <dxi-column *ngFor="let f of column" [visible]="!f.hide" [dataField]="f.field" [caption]="f.headerName"
              alignment="f.cellStyle.text-align" [width]="f.width" [allowResizing]="true" [alignment]="f.alignment"></dxi-column>
            <dxi-column [showInColumnChooser]="false" [visible]="(user.permissions.updt_in==1)?true:false" type="buttons"
              [width]="100" cellTemplate="editTemplate" caption="Edit">
              <div *dxTemplate="let data of 'editTemplate'">
                <div class="cursor-pointer" (click)="oneditClick()">
                  EDIT
                </div>
              </div>
            </dxi-column>
            <dxi-column [showInColumnChooser]="false" [visible]="(user.permissions.updt_in==1)?true:false" type="buttons"
              [width]="100" cellTemplate="deleteTemplate" caption="Delete">
              <div *dxTemplate="let data of 'deleteTemplate'">
                <div class="cursor-pointer" (click)="ondeleteClick(data)">
                  DELETE
                </div>
              </div>
            </dxi-column>
          </dx-data-grid>
        </div> -->

        <!-- <form [formGroup]="firstFormGroup"> -->
        <!-- <input type="checkbox" formControlName="published"> Published -->
        <!-- <div *ngIf="firstFormGroup.controls.published.value"> -->

        <!-- <div *ngFor="let data of formDta"> -->
        <form [formGroup]="firstFormGroup" fxLayout="column" class="mt-12" style="padding: 24px;"
          *ngIf="showedit && !showTble">

          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Enter Schedule Name<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <input name="name" placeholder="Enter Schedule Name" formControlName="schedule_nm" matInput required>
                <mat-error>Schedule Name is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Enter Schedule Description<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <input name="name" placeholder="Enter Schedule Description" formControlName="schedule_desc" matInput
                  required>
                <mat-error>Schedule Description is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Enter Month<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <input name="name" placeholder="Enter Month" formControlName="month" matInput required>
                <mat-error>Month is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Enter WeekDays<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <input name="name" placeholder="Enter WeekDays" formControlName="weekdays" matInput required>
                <mat-error>WeekDays is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Enter Date<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <input name="name" placeholder="Enter Date" formControlName="dates" matInput required>
                <mat-error>Date is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Enter Hours<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <input name="name" placeholder="Enter Hours" formControlName="hours" matInput required>
                <mat-error>Hours is required!</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div fxLayout.xl="row" fxLayout.lg="row" fxLayout.md="row" fxLayout.xs="column">
            <div fxFlex.xl="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.xs="100">
              <div class="form-label">Enter Minutes<span class="reqSgnColor">*</span></div>
              <mat-form-field appearance="outline">
                <input name="name" placeholder="Enter Minutes" formControlName="minutes" matInput required>
                <mat-error>Minutes is required!</mat-error>
              </mat-form-field>
            </div>
          </div>

          <!-- <div fxFlex="12" fxFlex.xs="100" class="px-8">
                <div class="form-label">Enter Minutes*</div>
                <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">
                  <input matInput placeholder="Placeholder" type="text" 
                     formControlName="minutes" required>
                  <mat-error>Minutes is required!</mat-error>
                </mat-form-field>
              </div> -->
          <!-- <div fxFlex="5" fxFlex.xs="100" class="px-8">

                </div> -->

                <div class="m-0 p-16" fxLayout="row" fxLayoutAlign="end center" style="text-align: center;">
                  <div fxFlex fxFlex.gt-lg="50%" fxFlex.gt-md="50%" fxFlex.gt-sm="100%" fxFlex.gt-xs="100%">
                    <!-- <div> -->
                      <button mat-flat-button type="submit" class="mat-raised-button w-70-p saveBtn-color" aria-label="SAVE"
                      (click)="saveSchedule()" >
                      SAVE
                    </button>
                    <!-- </div> -->
                  </div>
        
                  <div fxFlex fxFlex.gt-lg="50%" fxFlex.gt-md="50%" fxFlex.gt-sm="100%" fxFlex.gt-xs="100%">
        
                    <button mat-flat-button type="submit" class="mat-raised-button w-70-p  cnclBtn-color ml-8" aria-label="SAVE"
                      (click)="opensideBar('addFormPanel',null,null)" >
                      CANCEL
                    </button>
        
                  </div>
                </div>
          
        </form>
       
        <!-- </div> -->
        <!-- <div *ngIf="showlogdata">{{logdata}} -->
        <!-- <div class="form-label">Enter Schedule Name*</div> -->
        <!-- <mat-form-field class="example-full-width lngCs ltlngwdth frmcsAl" appearance="outline">{{logdata}} -->
        <!-- <input matInput placeholder="Placeholder" type="text" [(ngModel)]="data.schedule_nm"
              [ngModelOptions]="{standalone: true}" required>
            <mat-error>Schedule Name is required!</mat-error> -->
        <!-- </mat-form-field> -->
        <!-- </div> -->

        <!-- </div> -->
        <!-- </form> -->
      </div>
      <!-- </div> -->
    </ng-container>
  </ds-sidebar>
</div>